<Project Sdk="Microsoft.NET.Sdk">
  <ItemGroup>
    <ProjectReference Include="..\..\src\Microsoft.ML.Data\Microsoft.ML.Data.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.Maml\Microsoft.ML.Maml.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.ImageAnalytics\Microsoft.ML.ImageAnalytics.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.PipelineInference\Microsoft.ML.PipelineInference.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.OnnxTransform\Microsoft.ML.OnnxTransform.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.DnnImageFeaturizer.ResNet18\Microsoft.ML.DnnImageFeaturizer.ResNet18.csproj" />
    <ProjectReference Include="..\Microsoft.ML.Predictor.Tests\Microsoft.ML.Predictor.Tests.csproj" />
    <ProjectReference Include="..\Microsoft.ML.TestFramework\Microsoft.ML.TestFramework.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.ML.Onnx.TestModels" Version="0.0.3-test" />
  </ItemGroup>

  <ItemGroup>
    <DnnModelFiles Include="$(ObjDir)DnnImageModels\ResNetPrepOnnx\ResNetPreprocess.onnx" 
    DestinationDir="$(OutDir)\DnnImageModels\ResNetPrepOnnx" />
  </ItemGroup>

  <ItemGroup>
    <DnnModelFiles Include="$(ObjDir)DnnImageModels\ResNet18Onnx\ResNet18.onnx" 
    DestinationDir="$(OutDir)\DnnImageModels\ResNet18Onnx" />
  </ItemGroup>
  
  <Target Name="CopyMainFiles" AfterTargets="Build">
    <Copy 
      SourceFiles="@(DnnModelFiles)"
      DestinationFolder="@(DnnModelFiles->'%(DestinationDir)')" />
  </Target>

</Project>
