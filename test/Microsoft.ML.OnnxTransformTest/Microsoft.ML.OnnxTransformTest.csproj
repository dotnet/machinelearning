<Project Sdk="Microsoft.NET.Sdk">
  <ItemGroup>
    <ProjectReference Include="..\..\src\Microsoft.ML.Data\Microsoft.ML.Data.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.Maml\Microsoft.ML.Maml.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.ImageAnalytics\Microsoft.ML.ImageAnalytics.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.PipelineInference\Microsoft.ML.PipelineInference.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.OnnxTransform\Microsoft.ML.OnnxTransform.csproj" />
    <ProjectReference Include="..\..\src\Microsoft.ML.DnnImageFeaturizer.ResNet18\Microsoft.ML.DnnImageFeaturizer.ResNet18.csproj" />
    <ProjectReference Include="..\Microsoft.ML.Predictor.Tests\Microsoft.ML.Predictor.Tests.csproj" />
    <ProjectReference Include="..\Microsoft.ML.TestFramework\Microsoft.ML.TestFramework.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.ML.Onnx.TestModels" Version="0.0.2-test" />
  </ItemGroup>

  <ItemGroup>
    <DnnPrepModelFiles Include="$(RepoRoot)bin\obj\DnnImageModels\ResNetPrepOnnx\ResNetPreprocess.onnx" />
  </ItemGroup>

  <ItemGroup>
    <DnnMainModelFiles Include="$(RepoRoot)bin\obj\DnnImageModels\ResNet18Onnx\ResNet18.onnx" />
  </ItemGroup>

  <Target Name="CopyPrepFiles">
    <Copy 
      SourceFiles="@(DnnPrepModelFiles)"
      DestinationFolder="$(OutDir)\DnnImageModels\ResNetPrepOnnx" />
  </Target>
  
  <Target Name="CopyMainFiles" AfterTargets="Build" DependsOnTargets="CopyPrepFiles">
    <Copy 
      SourceFiles="@(DnnMainModelFiles)"
      DestinationFolder="$(OutDir)\DnnImageModels\ResNet18Onnx" />
  </Target>

</Project>